{"ast":null,"code":"import _toConsumableArray from\"/media/devdeadviz/1AAA83FAAA83D125/Projects/evernote-clone/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/media/devdeadviz/1AAA83FAAA83D125/Projects/evernote-clone/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/media/devdeadviz/1AAA83FAAA83D125/Projects/evernote-clone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/media/devdeadviz/1AAA83FAAA83D125/Projects/evernote-clone/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./App.css\";import React,{useState,useEffect}from\"react\";import firebase from\"./firebase/firebase\";import SideBar from\"./sideBar/SideBar\";import Editor from\"./editor/Editor\";import{timestamp}from\"./firebase/firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selectedNoteIndex=_useState2[0],setSelectedNoteIndex=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedNote=_useState4[0],setSelectedNote=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),notes=_useState6[0],setNotes=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),addingNote=_useState8[0],setAddingNote=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),title=_useState10[0],setTitle=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),text=_useState12[0],setText=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),id=_useState14[0],setId=_useState14[1];// n -> note, i -> index\nvar selectNote=function selectNote(snote,sindex){setSelectedNote(snote);setSelectedNoteIndex(sindex);console.log(\"App\",selectedNote,selectedNoteIndex);};// e -> note\nvar deleteNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var noteIndex;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!window.confirm(\"Are you sure you want to delete: \".concat(e.title))){_context.next=6;break;}noteIndex=notes.indexOf(e);_context.next=4;return setNotes(notes.filter(function(_note){return _note!==e;}));case 4:if(selectedNoteIndex===noteIndex){setSelectedNoteIndex(null);setSelectedNote(null);}else{notes.length>1?selectNote(notes[selectedNoteIndex-1],selectedNoteIndex-1):setSelectedNoteIndex(null);setSelectedNote(null);}firebase.firestore().collection(\"notes\").doc(e.id).delete();case 6:case\"end\":return _context.stop();}}},_callee);}));return function deleteNote(_x){return _ref.apply(this,arguments);};}();var newNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(title){var note,newFromDB,newID,newNoteIndex;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:note={title:title,body:\"\"};_context2.next=3;return firebase.firestore().collection(\"notes\").add({title:note.title,body:note.body,timestamp:timestamp});case 3:newFromDB=_context2.sent;newID=newFromDB.id;_context2.next=7;return setNotes([].concat(_toConsumableArray(notes),[note]));case 7:newNoteIndex=notes.indexOf(notes.filter(function(_note){return _note.id===newID[0];}));console.log(\"index\",notes[newNoteIndex]);setSelectedNote(notes[newNoteIndex]);setSelectedNoteIndex(newNoteIndex);setTitle(null);setAddingNote(false);case 13:case\"end\":return _context2.stop();}}},_callee2);}));return function newNote(_x2){return _ref2.apply(this,arguments);};}();var noteUpdate=function noteUpdate(id,noteObj){if(id){firebase.firestore().collection(\"notes\").doc(id).update({title:noteObj.title,body:noteObj.body,timestamp:timestamp});}};useEffect(function(){firebase.firestore().collection(\"notes\").onSnapshot(function(serverUpdate){var notes=serverUpdate.docs.map(function(_doc){var data=_doc.data();data[\"id\"]=_doc.id;return data;});setNotes(notes);});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(SideBar,{notes:notes,selectedNoteIndex:selectedNoteIndex,selectNote:selectNote,deleteNote:deleteNote,newNote:newNote,addingNote:addingNote,setAddingNote:setAddingNote,title:title,setTitle:setTitle}),selectedNote&&/*#__PURE__*/_jsx(Editor,{notes:notes,setNotes:setNotes,selectedNote:selectedNote,setSelectedNote:setSelectedNote,selectedNoteIndex:selectedNoteIndex,setSelectedNoteIndex:setSelectedNoteIndex,title:title,setTitle:setTitle,noteUpdate:noteUpdate,id:id,setId:setId,text:text,setText:setText})]});};export default App;","map":{"version":3,"sources":["/media/devdeadviz/1AAA83FAAA83D125/Projects/evernote-clone/src/App.js"],"names":["React","useState","useEffect","firebase","SideBar","Editor","timestamp","App","selectedNoteIndex","setSelectedNoteIndex","selectedNote","setSelectedNote","notes","setNotes","addingNote","setAddingNote","title","setTitle","text","setText","id","setId","selectNote","snote","sindex","console","log","deleteNote","e","window","confirm","noteIndex","indexOf","filter","_note","length","firestore","collection","doc","delete","newNote","note","body","add","newFromDB","newID","newNoteIndex","noteUpdate","noteObj","update","onSnapshot","serverUpdate","docs","map","_doc","data"],"mappings":"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","sourcesContent":["import \"./App.css\";\nimport React, { useState, useEffect } from \"react\";\nimport firebase from \"./firebase/firebase\";\nimport SideBar from \"./sideBar/SideBar\";\nimport Editor from \"./editor/Editor\";\nimport { timestamp } from \"./firebase/firebase\";\n\nconst App = () => {\n  const [selectedNoteIndex, setSelectedNoteIndex] = useState(null);\n  const [selectedNote, setSelectedNote] = useState(null);\n  const [notes, setNotes] = useState([]);\n  const [addingNote, setAddingNote] = useState(false);\n  const [title, setTitle] = useState(null);\n  const [text, setText] = useState(null);\n  const [id, setId] = useState(null);\n\n  // n -> note, i -> index\n  const selectNote = (snote, sindex) => {\n    setSelectedNote(snote);\n    setSelectedNoteIndex(sindex);\n    console.log(\"App\", selectedNote, selectedNoteIndex);\n  };\n\n  // e -> note\n  const deleteNote = async (e) => {\n    if (window.confirm(`Are you sure you want to delete: ${e.title}`)) {\n      const noteIndex = notes.indexOf(e);\n      await setNotes(notes.filter((_note) => _note !== e));\n      if (selectedNoteIndex === noteIndex) {\n        setSelectedNoteIndex(null);\n        setSelectedNote(null);\n      } else {\n        notes.length > 1\n          ? selectNote(notes[selectedNoteIndex - 1], selectedNoteIndex - 1)\n          : setSelectedNoteIndex(null);\n        setSelectedNote(null);\n      }\n      firebase.firestore().collection(\"notes\").doc(e.id).delete();\n    }\n  };\n\n  const newNote = async (title) => {\n    const note = {\n      title: title,\n      body: \"\",\n    };\n    const newFromDB = await firebase.firestore().collection(\"notes\").add({\n      title: note.title,\n      body: note.body,\n      timestamp: timestamp,\n    });\n    const newID = newFromDB.id;\n    await setNotes([...notes, note]);\n    const newNoteIndex = notes.indexOf(\n      notes.filter((_note) => _note.id === newID[0])\n    );\n    console.log(\"index\", notes[newNoteIndex]);\n    setSelectedNote(notes[newNoteIndex]);\n    setSelectedNoteIndex(newNoteIndex);\n    setTitle(null);\n    setAddingNote(false);\n  };\n\n  const noteUpdate = (id, noteObj) => {\n    if (id) {\n      firebase.firestore().collection(\"notes\").doc(id).update({\n        title: noteObj.title,\n        body: noteObj.body,\n        timestamp: timestamp,\n      });\n    }\n  };\n\n  useEffect(() => {\n    firebase\n      .firestore()\n      .collection(\"notes\")\n      .onSnapshot((serverUpdate) => {\n        const notes = serverUpdate.docs.map((_doc) => {\n          const data = _doc.data();\n          data[\"id\"] = _doc.id;\n          return data;\n        });\n        setNotes(notes);\n      });\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <SideBar\n        notes={notes}\n        selectedNoteIndex={selectedNoteIndex}\n        selectNote={selectNote}\n        deleteNote={deleteNote}\n        newNote={newNote}\n        addingNote={addingNote}\n        setAddingNote={setAddingNote}\n        title={title}\n        setTitle={setTitle}\n      />\n      {selectedNote && (\n        <Editor\n          notes={notes}\n          setNotes={setNotes}\n          selectedNote={selectedNote}\n          setSelectedNote={setSelectedNote}\n          selectedNoteIndex={selectedNoteIndex}\n          setSelectedNoteIndex={setSelectedNoteIndex}\n          title={title}\n          setTitle={setTitle}\n          noteUpdate={noteUpdate}\n          id={id}\n          setId={setId}\n          text={text}\n          setText={setText}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}